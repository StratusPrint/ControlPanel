<div id="printer" class="resource-page">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header flex-wrap flex-valign">
	          <a 
	          	ng-if="printer.status === 'ready' || printer.status === 'printing' || printer.status === 'completed'" 
	          	href="javascript:void" tooltip-placement="bottom" 
	          	tooltip-close-delay="200"
	          	uib-tooltip="This printer is currently {{::printer.status | uppercase}}.">
	          		<span class="label label-success">
	          			<i class="fa fa-check-circle"></i>
	          			{{printer.friendly_id}}
	          		</span>
	          </a>

	          <a 
	          	ng-if="printer.status === 'errored' || printer.status === 'offline'" 
	          	href="javascript:void" tooltip-placement="bottom" 
	          	tooltip-close-delay="200"
	          	uib-tooltip="This printer is currently {{::printer.status | uppercase}}.">
	          		<span class="label label-danger">
	          			<i class="fa fa-times-circle"></i>
	          			{{printer.friendly_id}}
	          		</span>
	          </a>

	          <a 
	          	ng-if="printer.status === 'paused' || printer.status === 'cancelled'"
	          	href="javascript:void" tooltip-placement="bottom" 
	          	tooltip-close-delay="200"
	          	uib-tooltip="This printer is currently {{::printer.status | uppercase}}.">
	          		<span class="label label-default">
	          			<i class="fa fa-pause"></i>
	          			{{printer.friendly_id}}
	          		</span>
	          </a>

              <span class="desc">{{printer.description}}</span>
            </h1>
        </div>
    </div>
    <!--Current Print Job Panel-->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading"><i class="fa fa-cog fa-spin"></i> Current Job</div>
                <div class="panel-body">
				<!--No current job Alert-->
                <p ng-if="!currentJob.length" class="alert alert-warning no-margin"><i class="fa fa-exclamation-triangle"></i> There are currently no jobs printing.</p>

                <!--Current Job-->
               	<div ng-if="currentJob.length">
                	<!--Alert-->
                	<uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlertIdx($index)"> {{alert.msg}}</uib-alert>

                    <!--Job Progress-->
                    <h4><i class="fa fa-tasks"></i> Current Progress</h4>
                    <uib-progressbar class="progress-striped active" max="100" value="currentJob.data.progress.completion" type="info"><i>{{currentJob.data.progress.completion}}% Completed</i></uib-progressbar>
                    <h4><i class="fa fa-hand-o-right"></i> Job Actions</h4>
                    <!--Job Actions-->
                    <div class="btn-group"  role="printer-actions" style="margin-bottom: 10px;">
                        <label ng-model="command" uib-btn-radio="'start'" type="button" class="btn btn-success"><i class="fa fa-play"></i> Start</label>
                        <label ng-model="command" uib-btn-radio="'pause'" type="button" class="btn btn-info"><i class="fa fa-pause"></i> Pause</label>
                        <label ng-model="command" uib-btn-radio="'cancel'" type="button" class="btn btn-danger"><i class="fa fa-ban"></i> Cancel</button></label>
                    </div>

                    <!--Job Information-->
                    <h4><i class="fa fa-info-circle"></i> Job Information</h4>
                    <ul class="list-group no-margin">
                    	<li class="list-group-item">
							<label class="no-margin">ID:</label> {{currentJob.id}}</li>
                    	</li>
                        <li class="list-group-item">
                            <label class="no-margin">Created At:</label> {{currentJob.created_at}}</li>
                        <li class="list-group-item">
                            <label class="no-margin">Status:</label> {{currentJob.data.status}}</li>
                        <li class="list-group-item">
                            <label class="no-margin">File:</label> {{currentJob.model_file_name_full}}</li>
                        <li class="list-group-item">
                            <label class="no-margin">File Size:</label> {{currentJob.data.file.size}}</li>
                        <li class="list-group-item">
                            <label class="no-margin">Estimated Print Time:</label> {{currentJob.data.estimated_print_time}}</li>
                        <li class="list-group-item">
                            <label class="no-margin">Elapsed Print Time:</label> {{currentJob.data.progress.print_time}}</li>
                        <li class="list-group-item">
                            <label class="no-margin">Print Time Left:</label> {{currentJob.data.progress.print_time_left}}</li>
                        <li class="list-group-item">
                            <label class="no-margin">Progress:</label> {{currentJob.data.progress.completion}}</li>
                    </ul>
                </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" vertilize-container>
        <div class="col-lg-6">
            <!--Upload Job Panel-->
            <div class="panel panel-kashmir">
                <div class="panel-heading"><i class="fa fa-upload"></i> Upload New Job(s)</div>
                <div class="panel-body">
                    <ng-include src="'/control-panel/views/dashboard/upload.html'"></ng-include>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="panel panel-kashmir">
                <div class="panel-heading">
                	<i class="fa fa-terminal"></i> 
                	Issued Commands
                </div>
                <div class="panel-body">
                    <!--No issued commands alert-->
                    <p ng-if="!commands.length" class="alert alert-warning no-margin"><i class="fa fa-exclamation-triangle"></i> There have been no commands issued to this printer.</p>
                    <!--List of issued commands-->
					<table ng-if="commands.length" at-table at-paginated at-config="issuedCommandsConfig" at-list="commands" class="table table-striped table-bordered table-hover">
					    <thead></thead>
					    <tbody>
					        <tr>
					            <td class="text-center" at-attribute="name" at-title="Command">
					            	<span class="label label-default" ng-if="item.name === 'pause'">
					            		{{item.name}}
					            	</span>					            	
					            	<span class="label label-success" ng-if="item.name === 'start'">
					            		{{item.name}}
					            	</span>					            	
					            	<span class="label label-danger" ng-if="item.name === 'cancel'">
					            		{{item.name}}
					            	</span>
					            </td>
					            <td class="text-center" at-attribute="status" at-title="Status">
					            	<span class="label label-info" ng-if="item.status === 'issued'">
					            		{{item.status}}
					            	</span>					            	
					            	<span class="label label-success" ng-if="item.name === 'executed'">
					            		{{item.status}}
					            	</span>					            	
					            	<span class="label label-danger" ng-if="item.name === 'errored'">
					            		{{item.status}}
					            	</span>					            	
					            </td>
					            <td at-attribute="created_at" at-title="Issued At">{{item.created_at | date :'medium'}}</td>
					            <td at-implicit at-attribute="issued_by" at-title="Issued By"></td>
					        </tr>
					    </tbody>
					</table>
					<at-pagination ng-if="commands.length" at-list="commands" at-config="issuedCommandsConfig"></at-pagination>
                </div>
            </div>        
	        <!--Live Video Panel
	            <div class="panel panel-kashmir">
	                <div class="panel-heading"><i class="fa fa-video-camera"></i> Live Video</div>
	                <div class="panel-body">
	                    <div class="well no-margin" style="height: 353px;">
	                    </div>
	                </div>
	            </div>
	        -->
        </div>
    </div>

    <div class="row">
    	<div class="col-lg-12">
    		<h2 id="recent-jobs"><i class="fa fa-list-alt"></i> Recent Jobs</h2>
    		<!--Queued jobs-->
			<div class="job" ng-repeat="job in recentJobs">
				<h3>
					<i ng-if="job.data.status === 'queued'" class="fa fa-clock-o"></i>
					<i ng-if="job.data.status === 'completed'" class="fa check-circle-o"></i>
					<i ng-if="job.data.status === 'processing'" class="fa fa-circle-o-notch fa-spin"></i>
					<i ng-if="job.data.status === 'slicing'" class="fa fa-circle-o-notch fa-spin"></i>
					<i ng-if="job.data.status === 'paused'" class="fa fa-pause-circle-o"></i>
					<i ng-if="job.data.status === 'errored'" class="fa fa-times-circle-o"></i>
					<i ng-if="job.data.status === 'printing'" class="fa fa-gear fa-spin"></i>
					<span class="title">Job #{{job.id}}</span>
					<span class="label label-{{job.data.status}}">{{job.data.status | capitalize}}</span>
				</h3>
				<p class="meta">
					<span class="date"><i class="fa fa-calendar"></i> {{job.created_at | date :'medium'}}</span>
					<span class="file"> &middot; <i class="fa fa-file"></i> {{job.model_file_name_full}}
				</span>
			</div>
			<!--Processing jobs
			<div class="job" ng-repeat="job in processingJobs">
				<h3>
					<i class="fa fa-circle-o-notch fa-spin"></i> <span class="title">Job #{{job.id}}</span>
					<span class="label label-{{job.data.status}}">{{job.data.status | capitalize}}</span>
					<button style="margin-top: -5px;" class="btn btn-primary pull-right">Cancel</button>
				</h3>
				<p class="meta">
					<span class="date"><i class="fa fa-calendar"></i> {{job.created_at | date :'medium'}}</span>
					<span class="file"> &middot; <i class="fa fa-file"></i> {{job.model_file_name_full}}
				</span>
			</div>-->
		</div>
    </div>
</div>
